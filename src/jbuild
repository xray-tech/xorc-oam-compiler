(library
 ((name orcml)
  (public_name orcml)
  (libraries (base menhirLib sedlex stdio msgpck))
  (preprocess (pps (ppx_jane)))
  (flags (:standard -w -9))
))

(rule
 ((targets (lexer.ml))
  (deps    (lexer.sedlex.ml))
  (action  (run ${lib:sedlex:ppx_sedlex} ${<} -o ${@}))))

(menhir
 ((flags (--explain --dump))
  (modules (parser))))

(jbuild_version 1)
